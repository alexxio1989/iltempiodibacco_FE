<mat-card class="p-0 " matRipple style="max-width: 400px;">

  <div class="row pl-3 pr-0">

    <div class="col-4 d-flex align-items-center"
      style="background: rgba(180, 180, 180, 0.2);min-height: 150px; max-height: 150px; ">
      <div>
        <img *ngIf="prodotto.image !== undefined && prodotto.image !== null && prodotto.image !== ''" alt="Web Studio"
          class="img-fluid" src="{{prodotto.image}}" />
        <img *ngIf="prodotto.image === undefined || prodotto.image === null || prodotto.image === ''" alt="Web Studio"
          class="img-fluid" src="../../../assets/images/default.png" />
      </div>

    </div>
    <div class="col-7 ml-auto d-flex align-items-center ">
      <div class="card-body pl-0 pr-0 pb-2 pt-2">
        
        <div  class="d-flex justify-content-center"
          style="margin-bottom: -15px; margin-top: -5px;">
          <h4>{{prodotto.nomeProdotto}}</h4>

        </div>

       

        <div class=" d-flex justify-content-center mt-3">
          <h5>Prezzo : <b style="opacity: 0.7;">{{prodotto.prezzo }} € / {{prodotto.unita }}</b></h5>
    
        </div>

        <div *ngIf="prodotto.qntRimanente === 0" class=" d-flex justify-content-center mt-3">
          <h5>Prodotto Esaurito</h5>
    
        </div>

      </div>
    </div>
    <div class="col-1 pl-0">
      <button mat-icon-button style="margin-left: -20px" [disabled]="prodotto.qntRimanente === 0" [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu class="p-3 " #menu="matMenu">
        
        <div class="row " >
          <div class="col-12">

            <mat-label>Seleziona qnt. prodotto</mat-label>
            
            <app-incrementer  (valueOutput) ="countQuantityToCart($event)" [unita] = "prodotto.unita" (click)="$event.stopPropagation()" [value]="_value || 0" [step]="_step" [min]="_min" [max]="prodotto.qntRimanente" [wrap]="_wrap"></app-incrementer>
            
            <div>
              <button *ngIf="(quantityToCart > 0 && !isProdottoInCart) || ((quantityToCart > qntInCart) || (quantityToCart < qntInCart))" mat-button (click)="$event.stopPropagation();  aggiungiCarrello()"  style="color: #6c757d;">
                {{qntInCart > 0 && (quantityToCart > qntInCart) || (quantityToCart < qntInCart) ? 'Aggiorna carrello' : 'Aggiungi al carrello'}}
              </button>
            </div>
    
            <div>
              <button  *ngIf="isProdottoInCart  " mat-button (click)="$event.stopPropagation();  rimuoviCarrello(prodotto)"  style="color: #6c757d;">
                Rimuovi dal carrello
              </button>
            </div>
          </div>
        </div>

      </mat-menu>
    </div>
  </div>


</mat-card>